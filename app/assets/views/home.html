<section class="container">

    <div id="home-topics-menu">
        <a ui-sref=".inspiration" class="btn-flat topic">Inspiration</a>
        <a ui-sref=".showandtell" class="btn-flat topic">Show & Tell</a>
        <a ui-sref=".resources" class="btn-flat topic">Resources</a>
    </div>

    <div>
        <div ng-repeat="post in postCtrl.getAllPosts() | orderBy :'-votes' ">

            <!-- VOTES -->
            <div id="post-feed" class="row">
                <div class="col s2 m1 l1 left">
                    <a href="#"><i ng-click="postCtrl.upvotePost(post)" class="material-icons arrow right">arrow_drop_up</i></a>
                    <p class="post-votes" ng-cloak>{{post.votes}}</p>
                    <a href="#"><i ng-click="postCtrl.downvotePost(post)" class="material-icons arrow right">arrow_drop_down</i></a>
                </div>
                <!-- CARD -->
                <div class="col s8 m10 l10">
                    <div class="card horizontal">
                        <div class="card-image">
                            <div class="post-image">
                                <img ng-src="{{post.postImage}}" ng-cloak>
                            </div>
                        </div>
                        <div class="card-stacked">
                            <div class="card-content">
                                <p>
                                    <h6 class="header" ng-cloak>{{post.postTitle}}<a ng-href="{{post.postUrl}}" target="_blank" ng-cloak><i class="material-icons open-new">open_in_new</i></a></h6>
                                </p>
                                <p ng-cloak>{{post.postText | limitTo:255 }}</p>
                            </div>
                            <div class="card-action">
                                <div class="presentation">
                                    <gs-favorite></gs-favorite>
                                    <a ngModel="color" ui-sref="singlepost" ng-click="postCtrl.loadPost(post)"><i class="material-icons open-new right">remove_red_eye</i></a></a>
                                    <a href="#"><i class="material-icons view-comment" ng-click="showComments = !showComments; ">comments</i></a></a>
                                    <a href="#"><i class="material-icons comment" ng-click="makeComment = !makeComment">note_add</i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <table class="col s2 m1 l1 right">
                        <tbody>
                            <tr>
                                <td>
                                    <i class="fa fa-twitter" aria-hidden="true"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <i class="fa fa-google-plus" aria-hidden="true"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <i class="fa fa-pinterest" aria-hidden="true"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Make Comment INPUT -->
                <div class="row show-comments col s8 m10 l10 push-s2 push-m1 push-l1">
                    <div ng-controller="CommentsCtrl as commentsCtrl">
                        <div ng-show="makeComment" class="collapsible-header">
                            <input ng-model="commentsCtrl.comment" type="text" name="comment" id="comment_content" placeholder="Make a comment.">
                            <a href="" type="submit" class="black-text comment" ng-click="commentsCtrl.createComment(post.id)"><i class="material-icons">check_circle</i></a>
                        </div>



                        <!-- Show Comments -->
                        <!-- <div class="row show-comments col s8 m10 l10 push-s2 push-m1 push-l1"> -->
                        <div ng-show="showComments">
                            <div class="card show-comments">
                                <div class=" card-content">
                                    <div ng-repeat="comment in commentsCtrl.getPostComments() | filter: comment.postId ">
                                        <div class="comment-list-box">
                                            <ul class="comment-list">
                                                <li class="comment-list-item">{{comment.commentContent}}
                                                    <a class="btn-flat right" ng-click="commentsCtrl.deleteComment(comment.id)">x</a> </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        </div>


</section>
